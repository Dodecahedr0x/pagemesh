(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[148],{16944:function(e,t,n){"use strict";n.d(t,{r:function(){return m}});var r=n(27812),s=n(50029),a=n(87794),i=n.n(a),l=n(8193),c=n(44080),o=n(97287),u=n(67294),d=n(80471),f=n(85893),m=function(e){var t,n=e.onSuccess;e.onError;var a=(0,u.useRef)(null),m=(0,u.useState)(),p=m[0],x=m[1],h=(0,u.useState)(0),b=h[0],v=h[1],g=(0,u.useState)(Array((null==p?void 0:p.length)||0).fill("idle")),y=g[0],j=g[1];(0,u.useEffect)(function(){p&&p.length>0&&(v(0),j(function(e){return(e=Array((null==p?void 0:p.length)||0).fill("idle"))[0]="running",e}))},[p]);var w=function(){j(Array((null==p?void 0:p.length)||0).fill("idle")),v(0),x(void 0)},N=(t=(0,s.Z)(i().mark(function e(){return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:v(function(e){return j(function(t){return t[e]="finished",t[e+1]="running",(0,r.Z)(t)}),e+1});case 1:case"end":return e.stop()}},e)})),function(){return t.apply(this,arguments)}),O=function(e){switch(e){case"idle":return(0,f.jsx)(l.Gtc,{className:"w-10 h-10 m-auto"});case"running":return(0,f.jsx)("div",{className:"btn btn-circle loading flex m-auto"});case"failed":default:return(0,f.jsx)(l.LHV,{className:"w-10 h-10 m-auto text-error"});case"finished":return(0,f.jsx)(l.mny,{className:"w-10 h-10 m-auto text-success"})}},k=(0,f.jsx)(c.u.Root,{show:!!p,as:u.Fragment,children:(0,f.jsxs)(o.V,{as:"div",className:"relative z-10",initialFocus:a,onClose:w,children:[(0,f.jsx)(c.u.Child,{as:u.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,f.jsx)("div",{className:"fixed inset-0 bg-secondary bg-opacity-75 transition-opacity"})}),(0,f.jsx)("div",{className:"fixed inset-0 z-10 overflow-y-auto",children:(0,f.jsx)("div",{className:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0",children:(0,f.jsx)(c.u.Child,{as:u.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",children:(0,f.jsxs)(o.V.Panel,{className:"relative transform overflow-hidden rounded-lg text-left shadow-xl bg-base-300 transition-all sm:my-8 sm:w-full sm:max-w-lg",children:[(0,f.jsx)("div",{className:"px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:(0,f.jsxs)("div",{className:"sm:flex sm:items-start",children:[(0,f.jsx)("div",{className:"mx-auto flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-full bg-primary sm:mx-0 sm:h-10 sm:w-10",children:(0,f.jsx)(d.Mdg,{className:"h-6 w-6 text-primary-content","aria-hidden":"true"})}),(0,f.jsxs)("div",{className:"mt-3 w-full text-center flex flex-col gap-2 sm:mt-0 sm:ml-4 sm:text-left",children:[(0,f.jsx)(o.V.Title,{as:"div",className:"text-base font-semibold leading-6",children:"Create your profile"}),(0,f.jsxs)("table",{className:"table w-full rounded",children:[(0,f.jsx)("thead",{children:(0,f.jsxs)("tr",{className:"rounded-none",children:[(0,f.jsx)("th",{children:"Status"}),(0,f.jsx)("th",{children:"Description"})]})}),(0,f.jsx)("tbody",{children:(null==p?void 0:p.map(function(e,t){return(0,f.jsxs)("tr",{children:[(0,f.jsx)("th",{children:O(y[t])}),(0,f.jsx)("th",{children:(0,f.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,f.jsxs)("div",{className:"",children:[t+1,". ",e.title||""]}),(0,f.jsx)("div",{className:"text-xs opacity-60",children:e.description||""})]})})]},e.description+t)}))||null})]})]})]})}),(0,f.jsx)("div",{className:"px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6",children:b===(null==p?void 0:p.length)?(0,f.jsx)("button",{type:"button",className:"btn btn-secondary mt-3 inline-flex w-full justify-center rounded-md px-3 py-2 text-sm font-semibold shadow-sm sm:mt-0 sm:w-auto",onClick:function(){w(),n&&n()},children:"Close"}):(0,f.jsx)("button",{type:"button",className:"btn btn-secondary mt-3 inline-flex w-full justify-center rounded-md px-3 py-2 text-sm font-semibold shadow-sm sm:mt-0 sm:w-auto",onClick:w,ref:a,children:"Cancel"})})]})})})})]})});return{actions:p,modal:k,nextStep:N,setActions:x,setError:function(){v(function(e){return j(function(t){return t[e]="failed",(0,r.Z)(t)}),e})}}}},97888:function(e,t,n){"use strict";n.d(t,{M:function(){return o}});var r=n(54306),s=n(44718),a=n(93998),i=n(22285),l=n(8456),c=n(25535);function o(){var e=(0,r.O)(),t=(0,s.R)().connection,n=(0,c.lt)().networkConfiguration,o=new i.g6(a.GRAPHQL_ENDPOINTS.devnet);return(0,l.useGum)(e,t,{},n,o)}},25138:function(e,t,n){"use strict";n.d(t,{x:function(){return u}});var r=n(50029),s=n(87794),a=n.n(s),i=n(54306),l=n(67294),c=n(38816),o=n(31517);function u(){var e=(0,i.O)(),t=(0,l.useState)(),n=t[0],s=t[1];return(0,l.useEffect)(function(){(0,r.Z)(a().mark(function t(){return a().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e&&e.publicKey)){t.next=5;break}return t.next=3,new o.ShdwDrive(new c.Connection("https://rpc.helius.xyz/?api-key=d1593552-6d2e-4ef5-b897-856c3d96c316"),e).init();case 3:s(t.sent);case 5:case"end":return t.stop()}},t)}))()},[e.publicKey]),n}},66238:function(e,t,n){"use strict";var r=n(14671),s=n(38597),a=n(12902),i=(0,r.Z)((0,s.tJ)(function(e,t){return{setDefaultUser:function(t){return e((0,a.ZP)(function(e){e.user=t,e.profile=void 0}))},setDefaultProfile:function(t){return e((0,a.ZP)(function(e){e.profile=t}))},reset:function(){return e((0,a.ZP)(function(e){e.user=void 0,e.profile=void 0}))}}},{name:"bookmark-gum-store"}));t.Z=i},15630:function(e,t,n){"use strict";var r=n(14671),s=n(38597),a=n(12902),i=(0,r.Z)((0,s.tJ)(function(e,t){return{setBucket:function(t,n){return e((0,a.ZP)(function(e){e.bucket=t,e.owner=n}))}}},{name:"bookmark-shdw-drive-store"}));t.Z=i},62538:function(e,t,n){"use strict";n.d(t,{u:function(){return F},U:function(){return ee}});var r=n(59499),s=n(50029),a=n(84389),i=n(87794),l=n.n(i),c=n(82828),o=n(67294),u=n(84563),d=n(41664),f=n.n(d),m=n(85893),p=function(e){var t=e.page;return console.log(t),(0,m.jsxs)("div",{className:"flex flex-row justify-between gap-1 p-2 m-1 bg-neutral border-4 border-secondary-focus rounded-xl shadow-xl",children:[(0,m.jsx)("div",{className:"text-xl font-xl my-auto",children:t.text_preview}),(0,m.jsx)(f(),{href:"/page?id=".concat(t.postPublicKey),children:(0,m.jsx)("div",{className:"btn btn-ghost-accent",children:(0,m.jsx)(u.Z,{className:"w-6 h-6"})})})]})},x=n(38816),h=n(44718),b=n(54306),v=n(71118),g=(0,n(14671).Z)(function(e,t){var n;return{balance:0,getUserSOLBalance:(n=(0,s.Z)(l().mark(function t(n,r){var s;return l().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return s=0,t.prev=1,t.next=4,r.getBalance(n,"confirmed");case 4:s=t.sent/x.LAMPORTS_PER_SOL,t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.log("error getting balance: ",t.t0);case 11:e(function(e){e.balance=s,console.log("balance updated, ",s)});case 12:case"end":return t.stop()}},t,null,[[1,8]])})),function(e,t){return n.apply(this,arguments)})}});function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var j=function(){var e=(0,h.R)().connection,t=(0,b.O)().publicKey,n=g().getUserSOLBalance,a=(0,o.useCallback)((0,s.Z)(l().mark(function s(){var a,i;return l().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(t){s.next=4;break}return console.log("error","Wallet not connected!"),(0,v.h)({type:"error",message:"error",description:"Wallet not connected!"}),s.abrupt("return");case 4:return a="",s.prev=5,s.next=8,e.requestAirdrop(t,x.LAMPORTS_PER_SOL);case 8:return a=s.sent,s.next=11,e.getLatestBlockhash();case 11:return i=s.sent,s.next=14,e.confirmTransaction(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({signature:a},i),"confirmed");case 14:(0,v.h)({type:"success",message:"Airdrop successful!",txid:a}),n(t,e),s.next=22;break;case 18:s.prev=18,s.t0=s.catch(5),(0,v.h)({type:"error",message:"Airdrop failed!",description:null===s.t0||void 0===s.t0?void 0:s.t0.message,txid:a}),console.log("error","Airdrop failed! ".concat(null===s.t0||void 0===s.t0?void 0:s.t0.message),a);case 22:case"end":return s.stop()}},s,null,[[5,18]])})),[t,e,n]);return(0,m.jsx)("div",{className:"flex flex-row justify-center",children:(0,m.jsxs)("div",{className:"relative group items-center",children:[(0,m.jsx)("div",{className:"m-1 absolute -inset-0.5 bg-gradient-to-r from-indigo-500 to-fuchsia-500  rounded-lg blur opacity-20 group-hover:opacity-100 transition duration-1000 group-hover:duration-200 animate-tilt"}),(0,m.jsx)("button",{className:"px-8 m-2 btn animate-pulse bg-gradient-to-br from-indigo-500 to-fuchsia-500 hover:from-white hover:to-purple-300 text-black",onClick:a,children:(0,m.jsx)("span",{children:"Airdrop 1 "})})]})})},w=n(16944),N=n(8456),O=n(97888),k=n(66238),P=n(25138),S=n(15630),C=n(48764).Buffer;function Z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function K(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var F=function(e){(0,a.Z)(e);var t,n=(0,b.O)(),r=n.publicKey,i=n.signMessage,u=(0,O.M)(),d=(0,k.Z)().profile,f=(0,P.x)(),h=(0,S.Z)().bucket,v=(0,N.useCreatePost)(u).create,g=(0,o.useState)(),y=g[0],Z=g[1],F=(0,w.r)({}),D=F.setActions,E=F.nextStep,A=F.setError,T=F.modal;(0,o.useEffect)(function(){if(r&&u&&d){var e;(e=(0,s.Z)(l().mark(function e(){return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.post.getPostsByProfile(new x.PublicKey(d.profilePublicKey));case 2:Z(e.sent.map(function(e){return K({postPublicKey:e.cl_pubkey,metadataUri:e.metadatauri},e.metadata.data)}).filter(function(e){return"personal_page"===e.contentType}));case 4:case"end":return e.stop()}},e)})),function(){return e.apply(this,arguments)})()}},[r,u]);var _=(t=(0,s.Z)(l().mark(function e(){var t,n,s;return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return D([{title:"Sign",description:"Sign the default page"},{title:"Upload",description:"Uploading the default page"},{title:"Creating post",description:"Creating the Gum post"}]),e.prev=1,t="page-".concat(new Date().toISOString(),".json"),n={content:{blocks:[]},type:"blocks",contentType:c.v.PersonalPage,text_preview:"Default Bookmark page"},e.next=6,i(C.from(JSON.stringify(n)));case 6:return s=e.sent,E(),e.next=10,f.uploadFile(new x.PublicKey(h),new File([JSON.stringify(K(K({},n),{},{authorship:{signature:s,publicKey:r.toString()}}))],t));case 10:return E(),e.next=13,v("https://shdw-drive.genesysgo.net/".concat(h,"/").concat(t),new x.PublicKey(d.profilePublicKey),new x.PublicKey(d.userPublicKey),r);case 13:E(),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(1),A();case 19:case"end":return e.stop()}},e,null,[[1,16]])})),function(){return t.apply(this,arguments)});return(0,m.jsxs)("div",{className:"md:hero mx-auto p-4",children:[T,(0,m.jsxs)("div",{className:"md:hero-content flex flex-col",children:[(0,m.jsx)("div",{className:"mt-6",children:(0,m.jsx)("h1",{className:"text-center text-5xl font-bold text-transparent bg-clip-text bg-gradient-to-br from-indigo-500 to-fuchsia-500 mb-4",children:c.i})}),(0,m.jsx)("div",{children:y?y.map(function(e){return(0,m.jsx)(p,{page:e})}):null}),(0,m.jsx)("div",{className:"flex flex-row justify-center",children:(0,m.jsxs)("div",{className:"relative group items-center",children:[(0,m.jsx)("div",{className:"m-1 absolute -inset-0.5 bg-gradient-to-r from-indigo-500 to-fuchsia-500  rounded-lg blur opacity-20 group-hover:opacity-100 transition duration-1000 group-hover:duration-200 animate-tilt"}),(0,m.jsxs)("button",{className:"flex flex-row gap-2  group w-60 m-2 btn animate-pulse bg-gradient-to-br from-indigo-500 to-fuchsia-500 hover:from-white hover:to-purple-300 text-black",onClick:function(){return _()},children:[(0,m.jsx)("div",{className:"hidden group-disabled:block ",children:"Wallet not connected"}),(0,m.jsx)("div",{className:"block group-disabled:hidden",children:"Create a new page"})]})]})}),(0,m.jsx)("div",{className:"flex flex-col mt-2",children:(0,m.jsx)(j,{})})]})]})},D=n(44080),E=n(97287),A=n(45155),T=n(92077),_=n.n(T),U=function(){var e,t=(0,b.O)().publicKey,n=(0,P.x)(),r=(0,o.useState)(32768),a=r[0],i=r[1],c=(0,o.useState)(!1),u=c[0],d=c[1],f=(0,w.r)({onSuccess:function(){return d(!1)}}),p=f.setActions,x=f.nextStep,h=f.setError,v=f.modal,g=(e=(0,s.Z)(l().mark(function e(){return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return p([{title:"Creating storage account",description:"Creating a new storage account on ShdwDrive"}]),e.prev=1,e.next=4,n.createStorageAccount("Bookmark account","".concat(a,"KB"),"v2");case 4:e.sent,x(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),h();case 11:case"end":return e.stop()}},e,null,[[1,8]])})),function(){return e.apply(this,arguments)});return(0,m.jsxs)("div",{className:"flex flex-row justify-center",children:[(0,m.jsx)(D.u.Root,{show:u,as:o.Fragment,children:(0,m.jsxs)(E.V,{as:"div",className:"relative z-10",onClose:function(){return d(!1)},children:[(0,m.jsx)(D.u.Child,{as:o.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,m.jsx)("div",{className:"fixed inset-0 bg-secondary bg-opacity-75 transition-opacity"})}),(0,m.jsx)("div",{className:"fixed inset-0 z-10 overflow-y-auto",children:(0,m.jsx)("div",{className:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0",children:(0,m.jsx)(D.u.Child,{as:o.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",children:(0,m.jsxs)(E.V.Panel,{className:"relative transform overflow-hidden rounded-lg text-left shadow-xl bg-base-300 transition-all sm:my-8 sm:w-full sm:max-w-lg",children:[v,(0,m.jsx)("div",{className:"px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:(0,m.jsxs)("div",{className:"sm:flex sm:items-start",children:[(0,m.jsx)("div",{className:"mx-auto flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-full bg-primary sm:mx-0 sm:h-10 sm:w-10",children:(0,m.jsx)(A.txO,{className:"h-6 w-6 text-primary-content","aria-hidden":"true"})}),(0,m.jsxs)("div",{className:"mt-3 text-center flex flex-col gap-2 w-full sm:mt-0 sm:ml-4 sm:text-left",children:[(0,m.jsx)(E.V.Title,{as:"div",className:"text-base font-semibold leading-6",children:"Create your profile"}),(0,m.jsxs)("div",{className:"flex flex-col gap-1 w-full",children:[(0,m.jsx)("label",{className:"label",children:(0,m.jsx)("span",{className:"label-text",children:"Storage size"})}),(0,m.jsx)("input",{className:"range",min:0,max:65536,type:"range",onChange:function(e){return i(Number(e.target.value))}}),(0,m.jsx)("div",{children:_()(1e3*a).format("0.00b")})]})]})]})}),(0,m.jsxs)("div",{className:"px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6",children:[(0,m.jsx)("button",{type:"button",className:"btn btn-primary inline-flex w-full justify-center rounded-md px-3 py-2 text-sm font-semibold shadow-sm sm:ml-3 sm:w-auto",onClick:g,children:"Create"}),(0,m.jsx)("button",{type:"button",className:"btn btn-secondary mt-3 inline-flex w-full justify-center rounded-md px-3 py-2 text-sm font-semibold shadow-sm sm:mt-0 sm:w-auto",onClick:function(){return d(!1)},children:"Cancel"})]})]})})})})]})}),(0,m.jsxs)("div",{className:"relative group items-center",children:[(0,m.jsx)("div",{className:"m-1 absolute -inset-0.5 bg-gradient-to-r from-indigo-500 to-fuchsia-500  rounded-lg blur opacity-20 group-hover:opacity-100 transition duration-1000 group-hover:duration-200 animate-tilt"}),(0,m.jsxs)("button",{className:"flex flex-row gap-2 group w-60 m-2 btn animate-pulse bg-gradient-to-br from-indigo-500 to-fuchsia-500 hover:from-white hover:to-purple-300 text-black",onClick:function(){return d(!0)},disabled:!t,children:[(0,m.jsx)(A.txO,{}),(0,m.jsx)("div",{className:"hidden group-disabled:block ",children:"Wallet not connected"}),(0,m.jsx)("div",{className:"block group-disabled:hidden",children:"Create drive"})]})]})]})},B=n(90482),M=n(40997);function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var V=function(){var e=(0,b.O)().publicKey,t=(0,O.M)(),n=(0,k.Z)().user,r=(0,P.x)(),a=(0,S.Z)(),i=a.setBucket,c=a.bucket,u=(0,o.useState)(),d=u[0],f=u[1];return(0,o.useEffect)(function(){f(void 0)},[n,e]),(0,o.useEffect)(function(){function t(){return(t=(0,s.Z)(l().mark(function t(){return l().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(!e||!r)){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,r.getStorageAccounts("v2");case 4:f(t.sent.map(function(e){return L(L({},e.account),{},{publicKey:e.publicKey})}));case 6:case"end":return t.stop()}},t)}))).apply(this,arguments)}!function(){t.apply(this,arguments)}()},[n,t,e,r]),console.log(d),(0,m.jsxs)("div",{className:"flex flex-col justify-center bg-base-200 p-3 rounded-xl shadow-xl",children:[(0,m.jsx)("div",{className:"text-lg font-bold",children:"Select the default Shdw Drive"}),d&&d.length>0?(0,m.jsx)("div",{className:"flex flex-col rounded bg-base-100 rounded p-1",children:null==d?void 0:d.map(function(t){var n;return(0,m.jsxs)("div",{className:"flex flex-row gap-3 justify-between rounded p-1 hover:bg-accent-focus ".concat(t.publicKey.toString()===c?"bg-accent":""),onClick:function(){return i(t.publicKey.toString(),e.toString())},children:[(0,m.jsxs)("div",{className:"flex flex-col text-start",children:[(0,m.jsx)("div",{className:"text-ellipsis",children:t.identifier}),(0,m.jsx)("div",{className:"text-xs opacity-60",children:(0,M.sC)(t.publicKey)})]}),(0,m.jsx)("div",{children:_()(new B.t((null===(n=t.storage)||void 0===n?void 0:n.toString())||"0").toString()).format("0.00b")})]},t.publicKey.toString())})}):null,(0,m.jsx)(U,{})]})},z=n(4730),J=n(80471),W=n(25675),G=n.n(W),H=function(e){var t,n=e.isOpen,r=e.onClose,a=(0,o.useRef)(null),i=(0,b.O)().publicKey,c=(0,P.x)(),u=(0,O.M)(),d=(0,k.Z)(),f=(0,S.Z)().bucket,p=(0,o.useState)(""),h=p[0],v=p[1],g=(0,o.useState)(""),y=g[0],j=g[1],C=(0,o.useState)(""),Z=C[0],K=C[1],F=(0,o.useState)(),A=F[0],T=F[1],_=(0,o.useState)(""),U=_[0],B=_[1],M=(0,N.useCreateProfile)(u),R=M.create,L=M.isCreatingProfile,V=(0,w.r)({onSuccess:r}),z=V.setActions,W=V.nextStep,H=V.setError,I=V.modal,q=U&&c&&i,Q=(t=(0,s.Z)(l().mark(function e(){return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(q){e.next=2;break}return e.abrupt("return");case 2:return z([{title:"Upload",description:"Uploading the profile picture"},{title:"Upload",description:"Uploading the whole profile"},{title:"Creating profile",description:"Creating the Gum profile"}]),e.prev=3,e.next=6,c.uploadFile(new x.PublicKey(f),A);case 6:return W(),e.next=9,c.uploadFile(new x.PublicKey(f),new File([JSON.stringify({name:h,bio:Z,username:y,avatar:"https://shdw-drive.genesysgo.net/".concat(f,"/").concat(A.name)})],"profile.json"));case 9:return W(),e.next=12,R("https://shdw-drive.genesysgo.net/".concat(f,"/profile.json"),"Personal",new x.PublicKey(d.user.cl_pubkey),i);case 12:W(),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(3),H();case 18:case"end":return e.stop()}},e,null,[[3,15]])})),function(){return t.apply(this,arguments)});return(0,m.jsx)(D.u.Root,{show:n,as:o.Fragment,children:(0,m.jsxs)(E.V,{as:"div",className:"relative z-10",initialFocus:a,onClose:r,children:[(0,m.jsx)(D.u.Child,{as:o.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,m.jsx)("div",{className:"fixed inset-0 bg-secondary bg-opacity-75 transition-opacity"})}),(0,m.jsx)("div",{className:"fixed inset-0 z-10 overflow-y-auto",children:(0,m.jsx)("div",{className:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0",children:(0,m.jsx)(D.u.Child,{as:o.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",children:(0,m.jsxs)(E.V.Panel,{className:"relative transform overflow-hidden rounded-lg text-left shadow-xl bg-base-300 transition-all sm:my-8 sm:w-full sm:max-w-lg",children:[I,(0,m.jsx)("div",{className:"px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:(0,m.jsxs)("div",{className:"sm:flex sm:items-start",children:[(0,m.jsx)("div",{className:"mx-auto flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-full bg-primary sm:mx-0 sm:h-10 sm:w-10",children:(0,m.jsx)(J.Mdg,{className:"h-6 w-6 text-primary-content","aria-hidden":"true"})}),(0,m.jsxs)("div",{className:"mt-3 text-center flex flex-col gap-2 sm:mt-0 sm:ml-4 sm:text-left",children:[(0,m.jsx)(E.V.Title,{as:"div",className:"text-base font-semibold leading-6",children:"Create your profile"}),(0,m.jsxs)("div",{className:"flex flex-col",children:[(0,m.jsx)("label",{className:"label",children:(0,m.jsx)("span",{className:"label-text",children:"Name"})}),(0,m.jsx)("input",{className:"input",placeholder:"Name...",onChange:function(e){return v(e.target.value)}})]}),(0,m.jsxs)("div",{className:"flex flex-col",children:[(0,m.jsx)("label",{className:"label",children:(0,m.jsx)("span",{className:"label-text",children:"Nickname"})}),(0,m.jsx)("input",{className:"input",placeholder:"Nickname...",onChange:function(e){return j(e.target.value)}})]}),(0,m.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,m.jsx)("label",{className:"label",children:(0,m.jsx)("span",{className:"label-text",children:"Biography"})}),(0,m.jsx)("input",{className:"input",placeholder:"Biography...",onChange:function(e){return K(e.target.value)}})]}),(0,m.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,m.jsx)("label",{className:"label",children:(0,m.jsx)("span",{className:"label-text",children:"Avatar"})}),A?(0,m.jsx)(G(),{className:"rounded",src:U,alt:"Chosen avatar",width:200,height:200}):null,(0,m.jsx)("input",{className:"block w-full text-sm text-secondary-content file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-secondary file:text-secondary-content hover:file:bg-secondary-focus",type:"file",onChange:function(e){var t=e.target.files[0];T(t);var n=new FileReader;n.readAsDataURL(t),n.onloadend=function(){B(n.result.toString())}}})]})]})]})}),(0,m.jsxs)("div",{className:"px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6",children:[(0,m.jsx)("button",{type:"button",className:"btn btn-primary ".concat(L?"loading":""," ").concat(q?"":"disabled"," inline-flex w-full justify-center rounded-md px-3 py-2 text-sm font-semibold shadow-sm sm:ml-3 sm:w-auto"),onClick:Q,children:"Create"}),(0,m.jsx)("button",{type:"button",className:"btn btn-secondary mt-3 inline-flex w-full justify-center rounded-md px-3 py-2 text-sm font-semibold shadow-sm sm:mt-0 sm:w-auto",onClick:r,ref:a,children:"Cancel"})]})]})})})})]})})},I=function(){var e=(0,b.O)().publicKey,t=(0,o.useState)(!1),n=t[0],r=t[1];return(0,m.jsxs)("div",{className:"flex flex-row justify-center",children:[n?(0,m.jsx)(H,{isOpen:n,onClose:function(){return r(!1)}}):null,(0,m.jsxs)("div",{className:"relative group items-center",children:[(0,m.jsx)("div",{className:"m-1 absolute -inset-0.5 bg-gradient-to-r from-indigo-500 to-fuchsia-500  rounded-lg blur opacity-20 group-hover:opacity-100 transition duration-1000 group-hover:duration-200 animate-tilt"}),(0,m.jsxs)("button",{className:"flex flex-row gap-2  group w-60 m-2 btn animate-pulse bg-gradient-to-br from-indigo-500 to-fuchsia-500 hover:from-white hover:to-purple-300 text-black",onClick:function(){return r(!0)},disabled:!e,children:[(0,m.jsx)(J.Mdg,{}),(0,m.jsx)("div",{className:"hidden group-disabled:block ",children:"Wallet not connected"}),(0,m.jsx)("div",{className:"block group-disabled:hidden",children:"Create profile"})]})]})]})},q=["metadata"];function Q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function X(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Y=function(){var e=(0,b.O)().publicKey,t=(0,O.M)(),n=(0,k.Z)(),r=n.user,a=n.profile,i=n.setDefaultProfile,c=(0,o.useState)(),u=c[0],d=c[1];return(0,o.useEffect)(function(){d(void 0)},[r,e]),(0,o.useEffect)(function(){function n(){return(n=(0,s.Z)(l().mark(function n(){var a;return l().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(console.log(u,null==u?void 0:u.filter(function(e){return e.userPublicKey===r.cl_pubkey})),!(!r||!t||!e||u)){n.next=3;break}return n.abrupt("return");case 3:return n.next=5,t.profile.getProfilesByUser(new x.PublicKey(e));case 5:return console.log(a=n.sent),n.t0=d,n.next=10,Promise.all(a.map(function(e){return{userPublicKey:e.username,profileNamespace:Object.keys(JSON.parse(e.namespace))[0],profilePublicKey:e.cl_pubkey}}).filter(function(e){return e.userPublicKey===r.cl_pubkey}).map(function(){var e=(0,s.Z)(l().mark(function e(n){var s,a,i;return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.profileMetadata.getProfileMetadataByProfile(new x.PublicKey(n.profilePublicKey));case 2:return a=(s=e.sent).metadata,i=(0,z.Z)(s,q),e.abrupt("return",X(X(X(X({},r),n),i),a.data));case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 10:n.t1=n.sent,(0,n.t0)(n.t1);case 12:case"end":return n.stop()}},n)}))).apply(this,arguments)}console.log("fetch profiles"),function(){n.apply(this,arguments)}()},[r,t,e,u]),(0,m.jsxs)("div",{className:"flex flex-col justify-center bg-base-200 p-3 rounded-xl shadow-xl",children:[(0,m.jsx)("div",{className:"text-lg font-bold",children:"Select the default profile"}),u&&u.length>0?(0,m.jsx)("div",{className:"flex flex-col rounded bg-base-100 rounded p-1",children:null==u?void 0:u.map(function(e){return(0,m.jsxs)("div",{className:"flex flex-row gap-2 justify-between m-1 rounded p-1 ".concat((null==a?void 0:a.profile)===e.profile?"bg-success":""),onClick:function(){return i(e)},children:[(0,m.jsx)("div",{className:"my-auto w-16",children:(0,m.jsx)("img",{className:"rounded",src:e.avatar})}),(0,m.jsxs)("div",{className:"flex flex-col justify-start text-start w-full",children:[(0,m.jsx)("div",{children:e.name}),(0,m.jsxs)("div",{className:"text-xs opacity-60",children:["@",e.username]})]}),(0,m.jsx)("div",{className:"my-auto",children:e.profileNamespace.toUpperCase()})]})})}):null,(0,m.jsx)(I,{})]})},$=function(){var e=(0,b.O)().publicKey,t=(0,O.M)(),n=(0,k.Z)(),r=n.user,a=n.setDefaultUser,i=n.reset,c=(0,o.useState)(),u=c[0],d=c[1],f=(0,N.useCreateUser)(t).create;return(0,o.useEffect)(function(){function n(){return(n=(0,s.Z)(l().mark(function n(){return l().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!(!r||!t||!e||u)){n.next=2;break}return n.abrupt("return");case 2:return n.t0=d,n.next=5,t.user.getUserAccountsByAuthority(new x.PublicKey(e));case 5:n.t1=n.sent,(0,n.t0)(n.t1);case 7:case"end":return n.stop()}},n)}))).apply(this,arguments)}!function(){n.apply(this,arguments)}()},[r,t,e,u]),(0,m.jsxs)("div",{className:"flex flex-col justify-center bg-base-200 p-3 rounded-xl shadow-xl",children:[(0,m.jsx)("div",{className:"text-lg font-bold",children:"Select the default user"}),u&&u.length>0?(0,m.jsx)("div",{className:"flex flex-col rounded bg-base-100 rounded p-1",children:null==u?void 0:u.map(function(e){return(0,m.jsx)("div",{className:"flex flex-row gap-2 justify-between m-1 rounded p-1 ".concat(r.cl_pubkey===e.cl_pubkey?"bg-success":""),onClick:function(){i(),a(e)},children:(0,m.jsx)("div",{className:"flex flex-col justify-start text-start",children:(0,m.jsx)("div",{children:(0,M.sC)(e.cl_pubkey)})})},e.cl_pubkey)})}):null,(0,m.jsx)("div",{className:"flex flex-row justify-center",children:(0,m.jsxs)("div",{className:"relative group items-center",children:[(0,m.jsx)("div",{className:"m-1 absolute -inset-0.5 bg-gradient-to-r from-indigo-500 to-fuchsia-500  rounded-lg blur opacity-20 group-hover:opacity-100 transition duration-1000 group-hover:duration-200 animate-tilt"}),(0,m.jsxs)("button",{className:"flex flex-row gap-2 group w-60 m-2 btn animate-pulse bg-gradient-to-br from-indigo-500 to-fuchsia-500 hover:from-white hover:to-purple-300 text-black",onClick:function(){return f(e)},disabled:!e,children:[(0,m.jsx)(J.Mdg,{}),(0,m.jsx)("div",{className:"hidden group-disabled:block ",children:"Wallet not connected"}),(0,m.jsx)("div",{className:"block group-disabled:hidden",children:"Create User"})]})]})})]})},ee=function(e){return(0,a.Z)(e),(0,m.jsx)("div",{className:"md:hero mx-auto p-4",children:(0,m.jsxs)("div",{className:"md:hero-content flex flex-col",children:[(0,m.jsx)("h1",{className:"text-center text-5xl font-bold mt-10 mb-8",children:"Settings"}),(0,m.jsxs)("div",{className:"text-center flex flex-col gap-5",children:[(0,m.jsx)($,{}),(0,m.jsx)(Y,{}),(0,m.jsx)(V,{})]})]})})}},90232:function(){},31709:function(){},15267:function(){},42480:function(){},55024:function(){}}]);